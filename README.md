# Иллюстрация растровых алгоритмов (с использованием OpenCV.js)

## Описание

Веб-приложение для визуализации работы базовых растровых алгоритмов компьютерной графики.
Главная особенность данной реализации — использование библиотеки компьютерного зрения **OpenCV.js** для выполнения вычислений.

Приложение создает виртуальную матрицу в памяти, выполняет на ней растеризацию примитивов с помощью методов OpenCV, сканирует результат и визуализирует его на координатной сетке HTML5 Canvas. Это наглядно демонстрирует, как математические алгоритмы работают «под капотом» промышленных графических библиотек.

## Возможности

- **Интеграция с OpenCV.js**: Использование методов библиотеки (`cv.line`, `cv.circle`, `cv.Mat`) прямо в браузере.
- **Визуальная сетка**: Отображение осей координат, центра (0,0) и числовой разметки.
- **Алгоритмы растеризации:**
  - **Пошаговый / ЦДА / Брезенхем (Отрезок)**: Реализованы через `cv.line()` с типом `LINE_8` (классический алгоритм Брезенхема).
  - **Брезенхем (Окружность)**: Реализован через `cv.circle()`.
  - **Алгоритм Ву (Сглаживание)**: Реализован через `cv.line()` с флагом `LINE_AA`. Приложение считывает интенсивность пикселей (альфа-канал) для отображения полупрозрачности.
  - **Кривая Безье (Кастла–Питвея)**: Нативная JS-реализация (математическая формула) для демонстрации построения кривых.
- **Анимация**: Поэтапная отрисовка пикселей после считывания их координат из матрицы OpenCV.
- **Метрики**: Замер и отображение среднего времени выполнения операций внутри OpenCV.
- **UX**: Блокировка интерфейса до полной загрузки библиотеки и возможность очистки холста.

## Технологии

- **HTML5 / CSS3** — Структура и адаптивный дизайн в мягких розово-кремовых тонах.
- **JavaScript (ES6+)** — Логика приложения, обработка данных.
- **OpenCV.js (v4.x)** — Матричные операции и алгоритмы растеризации.
- **Canvas API** — Финальная отрисовка сетки и пикселей.

## Как это работает (Техническая часть)

1. **Инициализация**: При загрузке страницы асинхронно подгружается `opencv.js`.
2. **Виртуальная матрица**: При нажатии кнопки «Построить» создается объект `cv.Mat` (одноканальная матрица 8UC1), размер которой соответствует количеству клеток сетки.
3. **Растеризация**: Вызывается функция OpenCV (например, `cv.line`), которая «рисует» примитив внутри этой матрицы (в памяти).
4. **Считывание**: JS-скрипт проходит по массиву данных матрицы (`mat.data`), находит ненулевые пиксели и преобразует их матричные индексы (row, col) обратно в декартовы координаты (x, y) сетки.
5. **Визуализация**: Полученные координаты передаются на Canvas для анимации построения.

## Как запустить

1. Скачайте файл `index.html`.
2. Откройте его в любом современном браузере.
3. **Важно:** Для работы требуется подключение к интернету, так как библиотека OpenCV загружается через CDN (`docs.opencv.org`).

## Пример использования

1. Дождитесь активации кнопки **«Построить»** (это произойдет автоматически после загрузки OpenCV).
2. Выберите алгоритм в выпадающем списке, например **«Сглаженная линия (OpenCV AA)»**.
3. Задайте координаты начала и конца отрезка.
4. Нажмите кнопку **«Построить»**.
5. Наблюдайте, как пиксели разной прозрачности формируют сглаженную линию на сетке.
